<div class="my-projects-container">
    <h2 class="title">Mes Projets</h2>
  
    <!-- État de chargement -->
    <div *ngIf="loading" class="loading">
      <mat-spinner></mat-spinner>
      <p>Chargement en cours…</p>
    </div>
  
    <!-- Erreur -->
    <div *ngIf="!loading && errorMessage" class="error">
      {{ errorMessage }}
    </div>
  
    <!-- Liste vide -->
    <div *ngIf="!loading && !errorMessage && projects.length === 0" class="empty">
      Vous n'avez encore aucun projet.
    </div>
  
    <!-- Liste des projets sous forme de grille -->
    <div *ngIf="!loading && !errorMessage && projects.length > 0" class="project-grid">
      <mat-card *ngFor="let project of projects" class="project-card">
        <!-- Icône de visibilité -->
        <mat-icon class="visibility-icon" [ngClass]="{'public': project.visibilite === 'public', 'private': project.visibilite === 'privée'}">
          {{ project.visibilite === 'public' ? 'public' : 'lock' }}
        </mat-icon>
  
        <!-- Statut du projet -->
        <div class="status-indicator" [ngStyle]="{'background-color': getStatusColor(project.status ?? 0)}">
          <span class="status-text">{{ getStatusLabel(project.status ?? 0) }}</span>
        </div>
  
        <mat-card-header>
          <mat-card-title>{{ project.name }}</mat-card-title>
          <mat-card-subtitle>{{ project.type || 'Non spécifié' }}</mat-card-subtitle>
        </mat-card-header>
  
        <mat-card-content>
          <p><strong>Description :</strong> {{ project.description | slice:0:100 }}...</p>
          <p><strong>Créé le :</strong> {{ project.createdAt | date:'short' }}</p>
        </mat-card-content>
  
        <mat-card-actions>
            <button mat-icon-button (click)="viewDetails(project)">
            <mat-icon>code</mat-icon>
          </button>
          <button mat-icon-button (click)="openSettings(project)">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button (click)="chatDetails(project)">
            <mat-icon>chat</mat-icon>
          </button>
          <button mat-icon-button (click)="viewStatus(project)">
            <mat-icon>info</mat-icon>
          </button>
          <button *ngIf="project.status === 0 || project.status === 1" mat-icon-button (click)="deleteProject(project)">
            <mat-icon>delete</mat-icon>
          </button>
          <button mat-icon-button (click)="viewProject(project)">
            <mat-icon>more_vert</mat-icon>
          </button>
          <button *ngIf="project.status === 0 || project.status === 1" mat-icon-button (click)="toggleVisibility(project)">
            <mat-icon>{{ project.visibilite === 'privée' ? 'public' : 'lock' }}</mat-icon>
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
  