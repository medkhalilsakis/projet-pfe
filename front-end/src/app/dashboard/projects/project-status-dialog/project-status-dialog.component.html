<h2 mat-dialog-title>Statut du projet</h2>
<mat-dialog-content>

  <!-- Stepper -->
  <div class="stepper"
     [style.--progress-width]="(current / (stages.length - 1) * 100)">
    <ng-container *ngFor="let s of stages; let i = index">
      <div class="step"
           [ngClass]="{ 'completed': i < current, 'active': i === current }">
        <div class="circle">
          <mat-icon [color]="iconColor(i)">{{ iconName(i) }}</mat-icon>
        </div>
        <div class="label">{{ s.label }}</div>
      </div>
    </ng-container>
  </div>

  <!-- Bloc raison pour mise en pause -->
  <div *ngIf="showPauseReason" class="reason-block pause">
    <h3>Projet mis en pause</h3>
    <p class="reason-text">{{ data.project.pauseReason }}</p>
    <div *ngIf="data.project.attachments?.length" class="attachments">
      <h4>Pièces jointes</h4>
      <div class="att-list">
        <a *ngFor="let att of data.project.attachments"
           [href]="att.url" target="_blank">{{ att.fileName }}</a>
      </div>
    </div>
  </div>

  <!-- Bloc raison pour clôture -->
  <div *ngIf="showClosureReason" class="reason-block closure">
    <h3>Projet clôturé</h3>
    <p class="reason-text">{{ data.project.closureReason }}</p>
  </div>

</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="dialogRef.close()">Fermer</button>
</mat-dialog-actions>
