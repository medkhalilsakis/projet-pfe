<h1 mat-dialog-title>
  {{ data ? 'Éditer' : 'Nouveau' }} cas de test
</h1>
<div mat-dialog-content [formGroup]="form">
  <mat-form-field><mat-label>Numéro</mat-label>
    <input matInput formControlName="caseNumber"/></mat-form-field>
  <mat-form-field><mat-label>Titre</mat-label>
    <input matInput formControlName="title"/></mat-form-field>
  <mat-form-field><mat-label>Système/Sous-système</mat-label>
    <input matInput formControlName="subsystem"/></mat-form-field>
  <mat-form-field><mat-label>Description</mat-label>
    <textarea matInput formControlName="description"></textarea></mat-form-field>
  <mat-form-field><mat-label>Date d'exécution</mat-label>
    <input matInput [matDatepicker]="picker" formControlName="executionDate"/>
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>
  <mat-form-field><mat-label>Pré-conditions</mat-label>
    <textarea matInput formControlName="preconditions"></textarea></mat-form-field>

  <h3>Étapes</h3>
  <div formArrayName="steps">
    <div *ngFor="let s of steps.controls; let i = index" [formGroupName]="i" class="step-group">
      <mat-form-field><mat-label>Étape</mat-label>
        <input matInput formControlName="stepDesc"/></mat-form-field>
      <mat-form-field><mat-label>Action</mat-label>
        <input matInput formControlName="action"/></mat-form-field>
      <mat-form-field><mat-label>Attendu</mat-label>
        <input matInput formControlName="expected"/></mat-form-field>
      <mat-checkbox formControlName="success">Succès</mat-checkbox>
      <mat-form-field><mat-label>Commentaire</mat-label>
        <input matInput formControlName="comment"/></mat-form-field>
    </div>
  </div>
  <button mat-button (click)="addStep()">+ Ajouter étape</button>

  <mat-form-field><mat-label>Post-conditions</mat-label>
    <textarea matInput formControlName="postconditions"></textarea></mat-form-field>
</div>
<div mat-dialog-actions>
  <button mat-button (click)="dialogRef.close()">Annuler</button>
  <button mat-button color="primary" (click)="save()">Enregistrer</button>
</div>
