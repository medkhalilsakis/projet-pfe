<h1 mat-dialog-title class="dialog-title">Planifier une réunion</h1>

<div mat-dialog-content 
     class="dialog-content"
     [formGroup]="form"
     fxLayout="column"
     fxLayoutGap="16px">

  <!-- Ligne 1 : Sujet & Date -->
  <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="16px">
    <mat-form-field class="form-field form-field--subject" fxFlex>
      <mat-label class="form-label">Sujet</mat-label>
      <input class="form-input" matInput formControlName="subject" />
    </mat-form-field>

    <mat-form-field class="form-field form-field--date" fxFlex>
      <mat-label class="form-label">Date &amp; Heure</mat-label>
      <input class="form-input" matInput type="datetime-local" formControlName="date" />
    </mat-form-field>
  </div>

  <!-- Ligne 2 : Participants & Projet -->
  <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="16px">
    <mat-form-field class="form-field form-field--participants" fxFlex>
      <mat-label class="form-label">Participants</mat-label>
      <mat-select class="form-select" formControlName="participantsIds" multiple>
        <mat-option class="form-option" 
                    *ngFor="let u of allUsers" 
                    [value]="u.id">
          {{ u.nom }} {{ u.prenom }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="form-field form-field--project" fxFlex>
      <mat-label class="form-label">Projet (optionnel)</mat-label>
      <mat-select class="form-select" formControlName="projectId">
        <mat-option class="form-option" [value]="null">Aucun</mat-option>
        <mat-option class="form-option" *ngFor="let p of projects" [value]="p.id">
          {{ p.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Ligne 3 : Description -->
  <div fxLayout="row" fxLayout.lt-md="column">
    <mat-form-field class="form-field form-field--description" fxFlex>
      <mat-label class="form-label">Description</mat-label>
      <textarea class="form-textarea" 
                matInput 
                formControlName="description" 
                rows="4">
      </textarea>
    </mat-form-field>
  </div>

  <!-- Ligne 4 : Pièces jointes -->
  <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="16px" class="attachments-section" fxFlex>
    <label for="fileUpload" class="attachments-label">Pièces jointes</label>
    <input id="fileUpload" 
           class="attachments-input" 
           type="file" 
           (change)="onFileChange($event)" 
           multiple />
  </div>

</div>

<!-- Zone des boutons -->
<div mat-dialog-actions class="dialog-actions" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="12px">
  <button mat-button class="action-button action-cancel" (click)="cancel()">Annuler</button>
  <button mat-raised-button 
          class="action-button action-submit" 
          color="primary" 
          (click)="submit()" 
          [disabled]="form.invalid">
    Enregistrer
  </button>
</div>
